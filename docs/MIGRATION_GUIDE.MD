# Guia de Migra√ß√£o - Portugu√™s para Ingl√™s

## Guia R√°pido de Atualiza√ß√£o

Este guia ajuda a migrar c√≥digo existente para usar os novos nomes de m√©todos em ingl√™s.

---

## üîÑ Find & Replace

Use o comando abaixo para atualizar seu c√≥digo automaticamente:

### Para Orquestradores

```bash
# Substituir m√©todos no seu c√≥digo
sed -i '' 's/_coletar_contexto/_collect_context/g' seu_arquivo.py
sed -i '' 's/_analisar_contexto/_analyze_context/g' seu_arquivo.py
sed -i '' 's/_executar_subagente/_execute_subagent/g' seu_arquivo.py
sed -i '' 's/_gerar_hipotese/_generate_hypothesis/g' seu_arquivo.py
sed -i '' 's/_validar_resultado/_validate_result/g' seu_arquivo.py
```

### Para Vari√°veis de M√©tricas

```bash
sed -i '' 's/duracao_total_segundos/total_duration_seconds/g' seu_arquivo.py
sed -i '' 's/custo_total/total_cost/g' seu_arquivo.py
```

---

## üìã Checklist de Migra√ß√£o

### Passo 1: M√©todos do Orquestrador

- [ ] Substituir `_coletar_contexto` por `_collect_context`
- [ ] Substituir `_analisar_contexto` por `_analyze_context`
- [ ] Substituir `_executar_subagente` por `_execute_subagent`
- [ ] Substituir `_gerar_hipotese` por `_generate_hypothesis`
- [ ] Substituir `_validar_resultado` por `_validate_result`

### Passo 2: Handlers do OrchestrationGraph

Atualizar dicion√°rio de handlers:

```python
# ANTES ‚ùå
graph = OrchestrationGraph.from_handlers({
    "coletar_contexto": self._coletar_contexto,
    "gerar_hipotese": self._gerar_hipotese,
    "validar_resultado": self._validar_resultado,
})

# DEPOIS ‚úÖ
graph = OrchestrationGraph.from_handlers({
    "collect_context": self._collect_context,
    "generate_hypothesis": self._generate_hypothesis,
    "validate_result": self._validate_result,
})
```

### Passo 3: Vari√°veis de M√©tricas

```python
# ANTES ‚ùå
metrics = manifest.get("metrics") or {}
duration = metrics.get("duracao_total_segundos")
cost = metrics.get("custo_total")

# DEPOIS ‚úÖ
metrics = manifest.get("metrics") or {}
duration = metrics.get("total_duration_seconds")
cost = metrics.get("total_cost")
```

### Passo 4: Contexto de Agente

```python
# ANTES ‚ùå
llm = build_llm({
    "agent_context": {
        "subagent": "gerar_hipotese"
    }
})

# DEPOIS ‚úÖ
llm = build_llm({
    "agent_context": {
        "subagent": "generate_hypothesis"
    }
})
```

---

## üîç Exemplos Completos

### Exemplo 1: Orquestrador Simples

#### ANTES ‚ùå

```python
class MeuOrchestrator:
    def run(self):
        graph = OrchestrationGraph.from_handlers({
            "coletar": self._coletar_contexto,
            "gerar": self._gerar_hipotese,
            "validar": self._validar_resultado,
        })
        return graph.execute()

    def _coletar_contexto(self, state):
        # L√≥gica
        return state

    def _gerar_hipotese(self, state):
        # L√≥gica
        return state

    def _validar_resultado(self, state):
        duracao = state.get("duracao_total_segundos")
        custo = state.get("custo_total")
        return state
```

#### DEPOIS ‚úÖ

```python
class MeuOrchestrator:
    def run(self):
        graph = OrchestrationGraph.from_handlers({
            "collect": self._collect_context,
            "generate": self._generate_hypothesis,
            "validate": self._validate_result,
        })
        return graph.execute()

    def _collect_context(self, state):
        # L√≥gica
        return state

    def _generate_hypothesis(self, state):
        # L√≥gica
        return state

    def _validate_result(self, state):
        duration = state.get("total_duration_seconds")
        cost = state.get("total_cost")
        return state
```

### Exemplo 2: Subagente Customizado

#### ANTES ‚ùå

```python
@SubagentRegistry.register("meu_subagente")
class MeuSubagente:
    def executar(self, state):
        llm = build_llm({
            "agent_context": {
                "subagent": "meu_subagente"
            }
        })
        resultado = self._gerar_conteudo(state)
        return {"resultado": resultado}

    def _gerar_conteudo(self, state):
        # L√≥gica
        pass
```

#### DEPOIS ‚úÖ

```python
@SubagentRegistry.register("my_subagent")
class MySubagent:
    def execute(self, state):
        llm = build_llm({
            "agent_context": {
                "subagent": "my_subagent"
            }
        })
        result = self._generate_content(state)
        return {"result": result}

    def _generate_content(self, state):
        # L√≥gica
        pass
```

---

## ‚ö†Ô∏è Erros Comuns

### Erro 1: AttributeError

```
AttributeError: 'ZeroUmOrchestrator' object has no attribute '_coletar_contexto'
```

**Causa**: Tentando chamar m√©todo com nome antigo

**Solu√ß√£o**: Atualizar para `_collect_context`

### Erro 2: KeyError em Metrics

```
KeyError: 'duracao_total_segundos'
```

**Causa**: Tentando acessar m√©trica com nome antigo

**Solu√ß√£o**: Atualizar para `total_duration_seconds`

### Erro 3: Handler n√£o encontrado

```
KeyError: 'coletar_contexto' not found in graph handlers
```

**Causa**: Handler registrado com nome antigo no OrchestrationGraph

**Solu√ß√£o**: Atualizar chaves do dicion√°rio de handlers

---

## üß™ Testando as Mudan√ßas

Ap√≥s migrar, execute:

```bash
# Testar estrat√©gia ZeroUm
python scripts/run_strategy_agent.py zeroum TestMigration \
  -d "Teste de migra√ß√£o"

# Verificar se n√£o h√° erros de AttributeError ou KeyError
```

---

## üìö Refer√™ncias

- [RENAMING_SUMMARY.MD](RENAMING_SUMMARY.MD) - Resumo completo das mudan√ßas
- [CLAUDE.MD](../CLAUDE.MD) - Guia atualizado do framework
- [OBSERVABILITY.MD](OBSERVABILITY.MD) - Documenta√ß√£o de m√©tricas atualizada

---

## ‚ùì FAQ

**P: Preciso atualizar logs e coment√°rios?**
R: N√£o, apenas c√≥digo execut√°vel (fun√ß√µes, m√©todos, vari√°veis). Logs e coment√°rios podem permanecer em portugu√™s.

**P: E a documenta√ß√£o em docs/?**
R: Documentos hist√≥ricos n√£o foram atualizados intencionalmente para preservar rastreabilidade.

**P: Tem retrocompatibilidade?**
R: N√£o, esta √© uma breaking change. Todo c√≥digo deve ser atualizado.

**P: Posso criar aliases para os nomes antigos?**
R: Tecnicamente sim, mas n√£o √© recomendado. Melhor migrar completamente.

---

**√öltima atualiza√ß√£o**: 2025-11-13
